export class LanguageManager {
	static translations = {
		en: {
				welcome: "Welcome",
				login: "Login",
				register: "Register",
				username: "Username",
				password: "Password",
				email: "Email",
				createAccount: "Create Account",
				backToLogin: "Back to Login",
				loginWith42: "Login with 42",
				or: "or",
				dontHaveAccount: "Don't have an account?",
				playAgainstPlayer: "Play Against Player",
				playAgainstAI: "Play Against AI",
				createTournament: "Create Tournament",
				territoryBattle: "3-Player Territory Battle",
				pongBattle: "4-Player Pong Battle",
				playerStats: "Player Stats",
				recentMatches: "Recent Matches",
				matchWins: "Match Wins",
				tournamentWins: "Tournament Wins",
				totalMatches: "Total Matches",
				totalTournaments: "Total Tournaments",
				updateProfile: "Update Profile",
				friends: "Friends",
				users: "Users",
				logout: "Logout",
				twoFASection: "Two-Factor Authentication",
				usersList: "Users List",
				newPasswordoptional: "New Password (optional)",
				currentAvatar: "Current Avatar",
				changeAvatar: "Change Avatar",
				confirmPassword: "Confirm Password",
				enableDisable2FA: "Enable/Disable Two-Factor Authentication",
				backttoMain: "Back to Main",
				nautilusPongGame: "Nautilus Pong",
				nautilusPong: "Nautilus Pong",
				actions: "Actions",
				status: "Status",
				friendsList: "Friend List",
				yourFriends: "Your Friends",
				addFriend: "Add Friend",
				match: "Match",
				winner: "Winner",
				vs: "vs",
				score: "Score",
				online: "Online",
				offline: "Offline",
				block: "Block",
				unblock: "Unblock",
				blockedByUser: "Blocked by user",
				chat: "Chat",
				removeFriend: "Remove Friend",
				enterUsername: "Enter username",
				sendFriendRequest: "Send Friend Request",
				confirmRemoveFriend: "Are you sure you want to remove {username} from your friends list?"
		},
		ar: {
				welcome: "مرحباً",
				login: "تسجيل الدخول",
				register: "تسجيل",
				username: "اسم المستخدم",
				password: "كلمة المرور",
				email: "البريد الإلكتروني",
				createAccount: "إنشاء حساب",
				backToLogin: "العودة إلى تسجيل الدخول",
				loginWith42: "تسجيل الدخول باستخدام 42",
				or: "أو",
				dontHaveAccount: "ليس لديك حساب؟",
				playAgainstPlayer: "اللعب ضد لاعب",
				playAgainstAI: "اللعب ضد الذكاء الاصطناعي",
				createTournament: "إنشاء بطولة",
				territoryBattle: "معركة الأراضي ثلاثية اللاعبين",
				pongBattle: "معركة بونج رباعية اللاعبين",
				playerStats: "إحصائيات اللاعب",
				recentMatches: "المباريات الأخيرة",
				matchWins: "الفوز بالمباريات",
				tournamentWins: "الفوز بالبطولات",
				totalMatches: "إجمالي المباريات",
				totalTournaments: "إجمالي البطولات",
				updateProfile: "تحديث الملف الشخصي",
				friends: "الأصدقاء",
				users: "المستخدمون",
				logout: "تسجيل الخروج",
				twoFASection: "المصادقة الثنائية",
				usersList: "قائمة المستخدمين",
				newPasswordoptional: "كلمة المرور الجديدة (اختياري)",
				currentAvatar: "الصورة الرمزية الحالية",
				changeAvatar: "تغيير الصورة الرمزية",
				confirmPassword: "تأكيد كلمة المرور",
				enableDisable2FA: "تمكين/تعطيل المصادقة الثنائية",
				backttoMain: "العودة إلى الصفحة الرئيسية",
				nautilusPongGame: "نوتيلوس بونج",
				nautilusPong: "نوتيلوس بونج",
				actions: "الإجراءات",
				status: "الحالة",
				friendsList: "قائمة الأصدقاء",
				yourFriends: "أصدقاؤك",
				addFriend: "إضافة صديق",
				match: "مباراة",
				winner: "الفائز",
				vs: "ضد",
				score: "النتيجة",
				online: "متصل",
				offline: "غير متصل",
				block: "حظر",
				unblock: "إلغاء الحظر",
				blockedByUser: "محظور من قبل المستخدم",
				chat: "محادثة",
				removeFriend: "إزالة الصديق",
				enterUsername: "أدخل اسم المستخدم",
				sendFriendRequest: "إرسال طلب صداقة",
				confirmRemoveFriend: "هل أنت متأكد أنك تريد إزالة المستخدم {username} من قائمة أصدقائك؟"
		},
		ml: {
				welcome: "സ്വാഗതം",
				login: "ലോഗിൻ",
				register: "രജിസ്റ്റർ",
				username: "ഉപയോക്തൃനാമം",
				password: "പാസ്വേഡ്",
				email: "ഇമെയിൽ",
				createAccount: "അക്കൗണ്ട് സൃഷ്ടിക്കുക",
				backToLogin: "ലോഗിനിലേക്ക് മടങ്ങുക",
				loginWith42: "42 ഉപയോഗിച്ച് ലോഗിൻ ചെയ്യുക",
				or: "അല്ലെങ്കിൽ",
				dontHaveAccount: "അക്കൗണ്ട് ഇല്ലേ?",
				playAgainstPlayer: "കളിക്കാരനെതിരെ കളിക്കുക",
				playAgainstAI: "AI നെതിരെ കളിക്കുക",
				createTournament: "ടൂർണമെന്റ് സൃഷ്ടിക്കുക",
				territoryBattle: "3-പ്ലേയർ ടെറിട്ടറി ബാറ്റിൽ",
				pongBattle: "4-പ്ലേയർ പോങ് ബാറ്റിൽ",
				playerStats: "കളിക്കാരന്റെ സ്ഥിതിവിവരക്കണക്കുകൾ",
				recentMatches: "സമീപകാല മത്സരങ്ങൾ",
				matchWins: "മത്സര വിജയങ്ങൾ",
				tournamentWins: "ടൂർണമെന്റ് വിജയങ്ങൾ",
				totalMatches: "ആകെ മത്സരങ്ങൾ",
				totalTournaments: "ആകെ ടൂർണമെന്റുകൾ",
				updateProfile: "പ്രൊഫൈൽ അപ്ഡേറ്റ് ചെയ്യുക",
				friends: "സുഹൃത്തുക്കൾ",
				users: "ഉപയോക്താക്കൾ",
				logout: "ലോഗൗട്ട്",
				twoFASection: "ടു-ഫാക്ടർ ഓഥന്റിക്കേഷൻ",
				usersList: "ഉപയോക്താക്കളുടെ പട്ടിക",
				newPasswordoptional: "പുതിയ പാസ്വേഡ് (ഐച്ഛികം)",
				currentAvatar: "നിലവിലെ അവതാരം",
				changeAvatar: "അവതാരം മാറ്റുക",
				confirmPassword: "പാസ്വേഡ് സ്ഥിരീകരിക്കുക",
				enableDisable2FA: "ടു-ഫാക്ടർ ഓഥന്റിക്കേഷൻ സജ്ജീകരിക്കുക/അടയ്ക്കുക",
				backttoMain: "പ്രധാനത്തിലേക്ക് മടങ്ങുക",
				nautilusPongGame: "നൗട്ടിലസ് പോങ്",
				nautilusPong: "നൗട്ടിലസ് പോങ്",
				actions: "നടപടികൾ",
				status: "സ്ഥിതി",
				friendsList: "സുഹൃത്തുക്കളുടെ പട്ടിക",
				yourFriends: "നിന്റെ സുഹൃത്തുക്കൾ",
				addFriend: "സുഹൃത്താക്കുക",
				match: "മത്സരം",
				winner: "വിജയി",
				vs: "വേഴ്സസ്",
				score: "സ്കോർ",
				online: "ഓൺലൈൻ",
				offline: "ഓഫ്‌ലൈൻ",
				block: "ബ്ലോക്ക്",
				unblock: "അൺബ്ലോക്ക്",
				blockedByUser: "ഉപയോക്താവ് ബ്ലോക്ക് ചെയ്തു",
				chat: "ചാറ്റ്",
				removeFriend: "അടയ്ക്കുക",
				enterUsername: "ഉപയോക്താനാമം നൽകുക",
				sendFriendRequest: "സുഹൃത്താക്കുക",
				confirmRemoveFriend: "നിന്റെ സുഹൃത്തുക്കളിൽ നിന്ന് {username} അടയ്ക്കുക്കോ?"
		}
	};

	static currentLanguage = localStorage.getItem('language') || 'en';

	static initialize() {
		// Set initial language
		this.setLanguage(this.currentLanguage);
		
		// Add event listener for language selection
		document.getElementById('language-select')?.addEventListener('change', (e) => {
				this.setLanguage(e.target.value);
		});

		// Set initial dropdown value
		const select = document.getElementById('language-select');
		if (select) {
				select.value = this.currentLanguage;
		}
	}

	static setLanguage(lang) {
		this.currentLanguage = lang;
		localStorage.setItem('language', lang);
		
		// Handle RTL languages
		document.documentElement.dir = lang === 'ar' ? 'rtl' : 'ltr';
		document.body.classList.toggle('rtl', lang === 'ar');
		
		// Update all translatable elements
		this.updateContent();

		// Emit custom event for dynamic content updates
		window.dispatchEvent(new CustomEvent('languageChanged', { detail: { language: lang } }));
	}

	static updateContent() {
		document.querySelectorAll('[data-i18n]').forEach(element => {
			const key = element.getAttribute('data-i18n');
			if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
				element.placeholder = this.getTranslation(key);
			} else {
				element.textContent = this.getTranslation(key);
			}
		});
	}

	static getTranslation(key) {
		const translation = this.translations[this.currentLanguage][key] || this.translations['en'][key];
		return translation || key;
	}

	// Add method to handle dynamic content
	static translateDynamicContent(content, type) {
		switch (type) {
			case 'matchHistory':
					return this.translateMatchHistory(content);
			case 'userProfile':
					return this.translateUserProfile(content);
			default:
					return content;
		}
	}
}